<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<mata name="keywords" content="优购网,优购时尚商城,优购网上鞋城"></mata>
		<mata name="discription" content="优购网-时尚服饰鞋包网购首选,经营耐克、阿迪达斯、Kappa、匡威、百丽、他她、天美意、森达等众多知名品牌,100%专柜正品,免费送货,10天退换货,提供愉悦购物体验!"></mata>
		<title>优购时尚商城-时尚服饰鞋包网购首选-优生活，购时尚！</title>
		<link rel="Shortcut Icon" href="img/title.png">
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/reset.css"/>
		<link rel="stylesheet" type="text/css" href="css/shop.css"/>
		<link rel="stylesheet" type="text/css" href="css/iconfont.css"/>
		
	</head>
	<body>
		<div class="last">
			<header>
				<div class="content">
					<ul class="h_left">
						<li>
							<a href="">关注</a>
							<div class="img">
								<div>
									<img src="img/footer6.jpg" alt="">
								</div>
								<p>关注公众号</p>
							</div>
						</li>
						<li>
							<a href="">下载app</a>
							<div class="img">
								<div>
									<img src="img/footer5.png" alt="">
								</div>
								<p>下载优购APP</p>
							</div>
						</li>
					</ul>
					<ul class="h_right">
						<li id="login">
							<!-- <a href="reg.html">登录 /</a>
							<a href="login.html"> 注册</a> -->
						</li>
						<li>
							<a href="">
								<span class="iconfont icon-shoucang"></span>
								收藏
							</a>
						</li>
						<li id="shop">
							<!-- <a href="javascript:;">
								<span class="iconfont icon-gouwudai"></span>
								购物袋
							</a> -->
						</li>
						<li>
							<a href="javascript:;">
								公告
							</a>
						</li>
					</ul>
				</div>
			</header>
			<nav id="nav">
				<div>
					<h1>
						<a href="">
							<img src="img/shop/logo.jpg" alt="">
						</a>
					</h1>
					<p><img src="img/shop/logo1.png" ></p>
					<div class="right" >
						<ul id="chose">
							<li class="action">
								我的购物袋
								<i></i>
								<em></em>
							</li>
							<li>
								提交订单中心
								<i></i> 
								<em></em>
							</li>
							<li>
								成功提交订单
							</li>
						</ul>
					</div>
				</div>
			</nav>
			<div class="shop" id="shopping">
				<div class="content" id="content">
					<div class="header">
						<ul>
							<li>
								<input type="checkbox">
								全选
							</li>
							<li>商品颜色</li>
							<li>颜色尺码</li>
							<li>单价</li>
							<li>数量</li>
							<li>小计（元）</li>
							<li>操作</li>
						</ul>
					</div>
					<div class="body" id="list">
						
						<!-- <div class="list">
							<ul>
								<li>
									<input type="checkbox">
									<span><img src="img/a/tujie3.jpg" alt=""></span>
								</li>
								<li>
									<a href="">BELLE/百丽2020春新商场同款牛剖层皮革女休闲靴U8S1DAD0</a>
								</li>
								<li>
									<p>颜色:<span>黑色</span></p>
									<p>尺码:<span>35</span></p>
								</li>
								<li>
									<p>999</p>
								</li>
								<li>
									<dl>
										<dt>-</dt>
										<dt>1</dt>
										<dt>+</dt>
									</dl>
								</li>
								<li>
									<p>999</p>
								</li>
								<li>
									<p><a href="">移入收藏夹</a></p>
									<p><a href="">删除</a></p>
								</li>
							</ul>
						</div> -->
					</div>
					<div class="footer">
						<div class="left">
							<span><a href="index.html">继续购物</a></span>
							<span id="clearAll">清空购物车</span>
						</div>
						<div class="right">
							<span>总计（不含运费）:<a href="" id="balance">0</a></span>
							<button type="button">去结算</button>
						</div>
					</div>
				</div>
			</div>
			<div class="area" id="area">
				<div class="content">
					<div class="title">
						<span>请填写您的收获地址：<a href="" id="shop_back">返回购物车</a></span>
						<button type="button"><a href="">管理地址</a></button>
					</div>
					<div class="massige">
						<div class="list">
							<span>联系方式：</span>
							<div class="select">
							  <input type="text">
							</div>
							<p>( 用户发货通知和送货确认 )</p>
						</div>
						<div class="list">
							<span>邮政编码：</span>
							<div class="select">
							  <input type="text">
							</div>
							<p>( 请填写准确的邮编，以保证商品快速、准确到达 )</p>
						</div>
						<div class="list">
							<span>真实姓名：</span>
							<div class="select">
							  <input type="text">
							</div>
							<p>( 请输入收货人姓名，最多五个汉字 )</p>
						</div>
						<div class="list">
							<span>收货地址：</span>
							<div data-toggle="distpicker" class="select">
							  <select></select>
							  <select></select>
							  <select></select>
							</div>
						</div>
						<div class="list">
							<span>详细地址：</span>
							<div class="select">
							  <input type="text">
							</div>
						</div>
						
					</div>
					<div class="page">
						<div class="title">
							<span>选择付款方式</span>
						</div>
						<ul>
							<li>
								<a href="">
									<img src="https://pcs1.ygimg.cn/template/common/images/banklst/bank-img13.png" alt="">
								</a>
							</li>
							<li>
								<a href="">
									<img src="https://pcs2.ygimg.cn/template/common/images/banklst/bank-img45.png" alt="">
								</a>
							</li>
							<li>
								<a href="">
									<img src="https://pcs1.ygimg.cn/template/common/images/banklst/bank-img14.png" alt="">
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
			
			<div class="bottom">
				<p>Copyright © 2011-2014 Yougou Technology Co., Ltd. 
			    	<a href="">粤ICP备09070608号-4</a>
					 增值电信业务经营许可证：
					 <a href="">粤 B2-20090203</a>
				</p>
			</div>
		</div>
		<script src="http://www.jq22.com/jquery/1.11.1/jquery.min.js"></script>
		<script src="js/distpicker.data.js"></script>
		  <script src="js/distpicker.js"></script>
		  <script src="js/main.js"></script>
		<script type="text/javascript" src="js/data.js"></script>
		<script type="text/javascript">
			//从本地存储中拿到数据
			xuanran()
			function xuanran(){
				var list = document.getElementById('list');
				var data = JSON.parse(window.localStorage.getItem('json'));
				var str = '';
				for(var attr in data){
					str += `<div class="list">
								<ul>
									<li>
										<input type="checkbox">
										<span><img src="${data[attr].img}" alt=""></span>
									</li>
									<li>
										<a href="">${data[attr].title}</a>
									</li>
									<li>
										<p>颜色:<span>${data[attr].color}</span></p>
										<p>尺码:<span>${data[attr].size}</span></p>
									</li>
									<li>
										<p>${data[attr].prise}</p>
									</li>
									<li>
										<dl>
											<dt>-</dt>
											<dt id="num">${data[attr].num}</dt>
											<dt>+</dt>
										</dl>
									</li>
									<li>
										<p>${data[attr].prise}</p>
									</li>
									<li>
										<p><a href="">移入收藏夹</a></p>
										<p><a href="javascript:;" class="del" num="${attr}">删除</a></p>
									</li>
								</ul>
							</div>`;
				}
				list.innerHTML = str;
			}
			
			
			
			//实现登录后的header页面的不同
			var login = document.getElementById('login');
			var shop = document.getElementById('shop');
			var username = window.localStorage.getItem('username');
			var password = window.localStorage.getItem('password');
				if(username&&password){
				   login.innerHTML = '<a href="javascript:;">'+username+' /</a><a href="javascript:;"> 退出</a>';
				}else{
				   login.innerHTML = '<a href="reg.html">登录 /</a><a href="login.html"> 注册</a>';
				}
			
				if(username&&password){
					   shop.innerHTML = '<a href="shop.html"><span class="iconfont icon-gouwudai"></span>&nbsp;购物袋</a>';
				}else{
					   shop.innerHTML = '<a href="reg.html"><span class="iconfont icon-gouwudai"></span>&nbsp;购物袋</a>';
				}
				//退出
				var out = document.getElementById('login').children[1];
				out.onclick = function(){
					window.localStorage.removeItem('username');
					window.localStorage.removeItem('password');
					window.open('reg.html');
				}
				
				
			//删除(有bug)
			var del = document.getElementsByClassName('del');
			for(var i=0;i<del.length;i++){
				del[i].onclick = function(){
					this.parentElement.parentElement.parentElement.parentElement.style.display = 'none';
				}
			}
			//清空
			var clearAll = document.getElementById('clearAll');
			var list = document.getElementById('list');
			clearAll.onclick = function(){
				list.innerHTML = '<div class="box1"><p>什么宝贝都没有哦，快去加购吧~~~</p></div>';
			}
				
			//结算
			var content = document.getElementById('content');
			var input = content.getElementsByTagName('input');
			var jiesuan = document.getElementById('balance');
				//全选
				input[0].oninput = function(){
					if(input[0].checked){
						var prise = 0;
						var num = 0;
						var sum = 0;
						for(var i=1;i<input.length;i++){
							num = parseInt(input[i].parentElement.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.children[0].children[1].innerHTML); //获取选中商品的数量
							prise = parseInt(input[i].parentElement.nextElementSibling.nextElementSibling.nextElementSibling.children[0].innerHTML); //获取选中商品的价格 
							sum += prise*num;
							input[i].checked = true;
						}
						jiesuan.innerHTML = sum;
					}
					if(!input[0].checked){
						for(var i=1;i<input.length;i++){
							input[i].checked = false;
							jiesuan.innerHTML = 0;
						}
					}
				}
				//单个加入
				for(var i=1;i<input.length;i++){
					input[i].oninput = function(){
						if(this.checked){
							var jsprise = parseInt(jiesuan.innerHTML);//结算栏原有的价格
							var prise = parseInt(this.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.children[0].innerHTML); //获取选中商品的价格 
							var num = parseInt(this.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.children[0].children[1].innerHTML); //获取选中商品的数量
							jiesuan.innerHTML = jsprise+prise*num;
						}
						if(!this.checked){
							var jsprise = parseInt(jiesuan.innerHTML);//结算栏原有的价格
							var prise = parseInt(this.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.children[0].innerHTML); //获取选中商品的价格 
							var num = parseInt(this.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.children[0].children[1].innerHTML); //获取选中商品的数量
							jiesuan.innerHTML = jsprise-prise*num;
							input[0].checked = false;
						}
					}
					
				}
				
			//提交订单
			var submit = jiesuan.parentElement.nextElementSibling;
			var chose = document.getElementById('chose').children;
			var action = document.getElementsByClassName('action')[0];
			var shopping = document.getElementById('shopping');
			var area = document.getElementById('area');
			submit.onclick = function(){
				for(var i=0;i<chose.length;i++){
					chose[i].className = '';
				}
				chose[1].className = 'action';
				shopping.style.display = 'none';
				area.style.display = 'block';
			}
			//返回购物车
			var shop_back = document.getElementById('shop_back');
			shop_back.onclick = function(){
				for(var i=0;i<chose.length;i++){
					chose[i].className = '';
				}
				chose[0].className = 'action';
				shopping.style.display = 'block';
				area.style.display = 'none';
			}
		</script>
	</body>
</html>
